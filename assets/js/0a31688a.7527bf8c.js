"use strict";(self.webpackChunkes_documentacion_devops=self.webpackChunkes_documentacion_devops||[]).push([[3073],{2068:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"kubernetes/instalacion/calico-install","title":"Instalar CNI Calico","description":"La CNI (Container Network Interface) es esencial para la comunicaci\xf3n entre los pods y para que la red de pods funcione. En este lab, usamos Calico.","source":"@site/docs/kubernetes/instalacion/04-calico-install.md","sourceDirName":"kubernetes/instalacion","slug":"/kubernetes/instalacion/calico-install","permalink":"/devsecops-playground/docs/kubernetes/instalacion/calico-install","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/kubernetes/instalacion/04-calico-install.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Instalar CNI Calico"},"sidebar":"tutorialSidebar","previous":{"title":"Inicializar el Primer Control Plane","permalink":"/devsecops-playground/docs/kubernetes/instalacion/kubeadm-init"},"next":{"title":"Unir Nodos Control Plane Adicionales","permalink":"/devsecops-playground/docs/kubernetes/instalacion/join-masters"}}');var o=s(4848),i=s(8453);const c={sidebar_position:4,title:"Instalar CNI Calico"},r="Instalar CNI Calico",l={},t=[];function d(e){const n={code:"code",h1:"h1",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"instalar-cni-calico",children:"Instalar CNI Calico"})}),"\n",(0,o.jsx)(n.p,{children:"La CNI (Container Network Interface) es esencial para la comunicaci\xf3n entre los pods y para que la red de pods funcione. En este lab, usamos Calico."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Paso en el primer nodo Control Plane (192.168.100.12) o tu m\xe1quina local con kubectl configurado:"})}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Descargar el manifiesto de instalaci\xf3n de Calico:"}),"\nPuedes descargar el manifiesto oficial. La versi\xf3n puede variar."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# En la m\xe1quina donde tienes kubectl configurado (ej: primer maestro)\ncurl https://raw.githubusercontent.com/projectcalico/calico/v3.26.1/manifests/calico.yaml -O\n# O si usas una versi\xf3n espec\xedfica recomendada por kubeadm\n# curl https://raw.githubusercontent.com/kubernetes/kubernetes/release-X.Y/cluster/addons/coredns/coredns.yaml.sed\n"})}),"\n",(0,o.jsx)(n.p,{children:"[Tu descripci\xf3n aqu\xed sobre la versi\xf3n de Calico que usaste o por qu\xe9 elegiste ese manifiesto]"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Modificar el manifiesto si es necesario:"}),"\nSi el CIDR de Pods que usaste en ",(0,o.jsx)(n.code,{children:"kubeadm init"})," (192.168.0.0/16) no coincide con el CIDR predeterminado en el manifiesto de Calico (a menudo 192.168.0.0/16 o 10.42.0.0/16), ",(0,o.jsx)(n.strong,{children:"debes modificar el manifiesto de Calico"})," para que coincida. Busca la secci\xf3n ",(0,o.jsx)(n.code,{children:"CalicoNetwork"})," y el ",(0,o.jsx)(n.code,{children:"IPPool"})," y aseg\xfarate de que el campo ",(0,o.jsx)(n.code,{children:"cidr"})," sea ",(0,o.jsx)(n.code,{children:"192.168.0.0/16"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"[Tu descripci\xf3n aqu\xed sobre si tuviste que modificar el manifiesto de Calico y qu\xe9 l\xedneas espec\xedficas cambiaste para que el campo 'cidr' del IPPool fuera 192.168.0.0/16]"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Aplicar el manifiesto modificado de Calico:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# En la m\xe1quina donde tienes kubectl configurado\nkubectl apply -f calico.yaml\n"})}),"\n",(0,o.jsx)(n.p,{children:"[Tu salida de comando kubectl apply -f calico.yaml aqu\xed]"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Verificar el estado de los pods de Calico y CoreDNS:"}),"\nEspera unos minutos. Los pods de Calico y CoreDNS deben pasar a estado ",(0,o.jsx)(n.code,{children:"Running"}),". Puedes verificarlo."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n calico-system\nkubectl get pods -n kube-system\n"})}),"\n",(0,o.jsx)(n.p,{children:"[Tu salida de comandos kubectl get pods aqu\xed]"}),"\n",(0,o.jsxs)(n.p,{children:["Si los pods de Calico o CoreDNS se quedan en estado ",(0,o.jsx)(n.code,{children:"Pending"}),", ",(0,o.jsx)(n.code,{children:"Init"}),", o ",(0,o.jsx)(n.code,{children:"CrashLoopBackOff"}),", significa que hay un problema con la red o la CNI (ver secci\xf3n de Troubleshooting). El error ",(0,o.jsx)(n.code,{children:"CoreDNS Pending"})," es com\xfan si la CNI no est\xe1 instalada o no funciona correctamente."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>r});var a=s(6540);const o={},i=a.createContext(o);function c(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);