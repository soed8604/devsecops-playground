"use strict";(self.webpackChunkes_documentacion_devops=self.webpackChunkes_documentacion_devops||[]).push([[323],{8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>a});var c=o(6540);const i={},s=c.createContext(i);function r(e){const n=c.useContext(s);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),c.createElement(s.Provider,{value:n},e.children)}},8809:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"kubernetes/troubleshooting/calico-missing-bird-config","title":"Calico: BIRD no encuentra archivos de configuraci\xf3n","description":"S\xedntoma","source":"@site/docs/kubernetes/troubleshooting/04-calico-missing-bird-config.md","sourceDirName":"kubernetes/troubleshooting","slug":"/kubernetes/troubleshooting/calico-missing-bird-config","permalink":"/devsecops-playground/docs/kubernetes/troubleshooting/calico-missing-bird-config","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/kubernetes/troubleshooting/04-calico-missing-bird-config.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Calico: BIRD no encuentra archivos de configuraci\xf3n"},"sidebar":"tutorialSidebar","previous":{"title":"Calico Node Pod en 0/1 Ready","permalink":"/devsecops-playground/docs/kubernetes/troubleshooting/calico-node-notready-overview"},"next":{"title":"Calico: Fallo al conectar a Typha (Timeout 5473)","permalink":"/devsecops-playground/docs/kubernetes/troubleshooting/calico-typha-timeout"}}');var i=o(4848),s=o(8453);const r={sidebar_position:4,title:"Calico: BIRD no encuentra archivos de configuraci\xf3n"},a="Problema: Calico/BIRD no encuentra config",d={},l=[{value:"S\xedntoma",id:"s\xedntoma",level:2},{value:"Diagn\xf3stico",id:"diagn\xf3stico",level:2},{value:"Causa Ra\xedz",id:"causa-ra\xedz",level:2},{value:"Soluci\xf3n",id:"soluci\xf3n",level:2}];function t(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"problema-calicobird-no-encuentra-config",children:"Problema: Calico/BIRD no encuentra config"})}),"\n",(0,i.jsx)(n.h2,{id:"s\xedntoma",children:"S\xedntoma"}),"\n",(0,i.jsxs)(n.p,{children:["Al revisar los logs del pod ",(0,i.jsx)(n.code,{children:"calico-node"})," (despu\xe9s de ver que est\xe1 0/1 Ready), encuentras mensajes de error de BIRD indicando que no puede abrir sus archivos de configuraci\xf3n (",(0,i.jsx)(n.code,{children:"bird.cfg"})," y ",(0,i.jsx)(n.code,{children:"bird6.cfg"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl logs calico-node-<HASH> -n calico-system\n"})}),"\n",(0,i.jsx)(n.h2,{id:"diagn\xf3stico",children:"Diagn\xf3stico"}),"\n",(0,i.jsxs)(n.p,{children:["El proceso BIRD, esencial para el enrutamiento BGP en Calico, no puede iniciar porque los archivos de configuraci\xf3n que necesita no existen en la ubicaci\xf3n esperada dentro del contenedor (",(0,i.jsx)(n.code,{children:"/etc/calico/confd/config/"}),")."]}),"\n",(0,i.jsx)(n.h2,{id:"causa-ra\xedz",children:"Causa Ra\xedz"}),"\n",(0,i.jsxs)(n.p,{children:["Estos archivos de configuraci\xf3n son generados din\xe1micamente por otro componente dentro del pod ",(0,i.jsx)(n.code,{children:"calico-node"}),", usualmente el contenedor ",(0,i.jsx)(n.code,{children:"confd"}),". Si el contenedor ",(0,i.jsx)(n.code,{children:"confd"})," falla (ej: no puede conectar al API Server, error de configuraci\xf3n), estos archivos no se generan. El error inicial de mismatch de CIDR (si lo tuviste) o problemas de conexi\xf3n a Typha (ver siguiente secci\xf3n) pueden impedir que ",(0,i.jsx)(n.code,{children:"confd"})," genere la config correcta."]}),"\n",(0,i.jsx)(n.h2,{id:"soluci\xf3n",children:"Soluci\xf3n"}),"\n",(0,i.jsxs)(n.p,{children:['La soluci\xf3n a este s\xedntoma particular de "archivos no encontrados" es resolver la causa ra\xedz por la que el componente ',(0,i.jsx)(n.code,{children:"confd"})," no puede generar los archivos. Esto a menudo implica solucionar problemas de comunicaci\xf3n del pod ",(0,i.jsx)(n.code,{children:"calico-node"})," (y ",(0,i.jsx)(n.code,{children:"confd"}),") con el API Server o con el componente Typha de Calico, o corregir errores en la configuraci\xf3n de Calico aplicada."]}),"\n",(0,i.jsxs)(n.p,{children:["Los logs del contenedor ",(0,i.jsx)(n.code,{children:"confd"})," y los logs m\xe1s detallados del ",(0,i.jsx)(n.code,{children:"calico-node"})," son clave para encontrar la verdadera causa (ver siguientes secciones)."]}),"\n",(0,i.jsxs)(n.p,{children:["Pasos de diagn\xf3stico para ",(0,i.jsx)(n.code,{children:"confd"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Identifica los contenedores en el pod ",(0,i.jsx)(n.code,{children:"calico-node"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get pod calico-node-<HASH> -n calico-system -o jsonpath='{.spec.containers[*].name}'\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Obt\xe9n los logs del contenedor ",(0,i.jsx)(n.code,{children:"confd"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl logs calico-node-<HASH> -c confd -n calico-system\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Estos logs a menudo revelar\xe1n problemas de conexi\xf3n o errores de configuraci\xf3n que impiden la generaci\xf3n de ",(0,i.jsx)(n.code,{children:"bird.cfg"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}}}]);