"use strict";(self.webpackChunkes_documentacion_devops=self.webpackChunkes_documentacion_devops||[]).push([[6590],{7400:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"kubernetes/troubleshooting/coredns-pending","title":"CoreDNS Pods en Pending","description":"S\xedntoma","source":"@site/docs/kubernetes/troubleshooting/01-coredns-pending.md","sourceDirName":"kubernetes/troubleshooting","slug":"/kubernetes/troubleshooting/coredns-pending","permalink":"/devsecops-playground/docs/kubernetes/troubleshooting/coredns-pending","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/kubernetes/troubleshooting/01-coredns-pending.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"CoreDNS Pods en Pending"},"sidebar":"tutorialSidebar","previous":{"title":"Primer Paso de Instalaci\xf3n","permalink":"/devsecops-playground/docs/kubernetes/primer-paso-install"},"next":{"title":"Acceso a kubectl desde Local falla (Timeout a LB)","permalink":"/devsecops-playground/docs/kubernetes/troubleshooting/kubectl-lb-timeout"}}');var a=o(4848),r=o(8453);const i={sidebar_position:1,title:"CoreDNS Pods en Pending"},d="Problema: CoreDNS Pods en Pending",t={},c=[{value:"S\xedntoma",id:"s\xedntoma",level:2},{value:"Diagn\xf3stico",id:"diagn\xf3stico",level:2},{value:"Causa Ra\xedz",id:"causa-ra\xedz",level:2},{value:"Soluci\xf3n",id:"soluci\xf3n",level:2},{value:"Verificaci\xf3n",id:"verificaci\xf3n",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"problema-coredns-pods-en-pending",children:"Problema: CoreDNS Pods en Pending"})}),"\n",(0,a.jsx)(n.h2,{id:"s\xedntoma",children:"S\xedntoma"}),"\n",(0,a.jsxs)(n.p,{children:["Despu\xe9s de ejecutar ",(0,a.jsx)(n.code,{children:"kubeadm init"})," en el primer nodo Control Plane, los pods de CoreDNS en el namespace ",(0,a.jsx)(n.code,{children:"kube-system"})," se quedan en estado ",(0,a.jsx)(n.code,{children:"Pending"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n kube-system\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Si describes uno de los pods de CoreDNS (kubectl describe pod ",(0,a.jsx)(n.code,{children:"nombre_pod_coredns"})," -n kube-system), ver\xe1s eventos indicando FailedScheduling con un mensaje sobre network plugin."]}),"\n",(0,a.jsx)(n.h2,{id:"diagn\xf3stico",children:"Diagn\xf3stico"}),"\n",(0,a.jsx)(n.p,{children:"Los pods de CoreDNS (y la mayor\xeda de los pods de usuario) requieren una red de pods funcional proporcionada por una CNI (Container Network Interface) para poder arrancar y comunicarse. Como a\xfan no hab\xedamos instalado la CNI (Calico), Kubernetes no pod\xeda programar (schedule) los pods que dependen de ella, como CoreDNS."}),"\n",(0,a.jsx)(n.h2,{id:"causa-ra\xedz",children:"Causa Ra\xedz"}),"\n",(0,a.jsx)(n.p,{children:"Falta de una CNI instalada y funcional en el cluster."}),"\n",(0,a.jsx)(n.h2,{id:"soluci\xf3n",children:"Soluci\xf3n"}),"\n",(0,a.jsx)(n.p,{children:"Instalar la CNI (Calico en nuestro caso). Este paso se documenta en la secci\xf3n de Instalaci\xf3n."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Comando para instalar Calico\nkubectl apply -f calico.yaml\n"})}),"\n",(0,a.jsx)(n.h2,{id:"verificaci\xf3n",children:"Verificaci\xf3n"}),"\n",(0,a.jsx)(n.p,{children:"Despu\xe9s de aplicar el manifiesto de la CNI y esperar unos minutos, los pods de Calico y CoreDNS deber\xedan pasar a estado Running."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n kube-system\nkubectl get pods -n calico-system # Verifica tambi\xe9n los pods de Calico\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>d});var s=o(6540);const a={},r=s.createContext(a);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);